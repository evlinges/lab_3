{% extends "base.html" %}

{% block title %}–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å - Notes App{% endblock %}

{% block content %}
<div class="admin-panel">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1>‚öôÔ∏è –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—Å—å–∫–∞ –ø–∞–Ω–µ–ª—å</h1>
        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-top: 1rem;">–ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ—é üëë</p>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-value">{{ total_users }}</div>
            <div class="stat-label">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üìù</div>
            <div class="stat-value">{{ total_notes }}</div>
            <div class="stat-label">–ù–æ—Ç–∞—Ç–æ–∫</div>
        </div>
    </div>
    
    <div class="admin-section">
        <h2>üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h2>
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</th>
                        <th>Email</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</th>
                        <th>–î—ñ—ó</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.id }}</td>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>
                            {% if user.is_admin() %}
                            <span class="badge badge-admin">ADMIN</span>
                            {% else %}
                            <span class="badge badge-user">USER</span>
                            {% endif %}
                        </td>
                        <td>{{ user.created_at.strftime('%d.%m.%Y') if user.created_at else '–ù–µ–≤—ñ–¥–æ–º–æ' }}</td>
                        <td>
                            {% if user.id != current_user.id %}
                            <form method="POST" action="{{ url_for('web.admin_delete_user', user_id=user.id) }}" style="display: inline;" onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {{ user.username }}?');">
                                <button type="submit" class="btn btn-small btn-danger">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
                            </form>
                            {% else %}
                            <span class="text-muted">–í–∏</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="admin-section">
        <h2>üìù –í—Å—ñ –Ω–æ—Ç–∞—Ç–∫–∏</h2>
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                        <th>–ê–≤—Ç–æ—Ä</th>
                        <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
                        <th>–î—ñ—ó</th>
                    </tr>
                </thead>
                <tbody>
                    {% for note in notes %}
                    <tr>
                        <td>{{ note.id }}</td>
                        <td>{{ note.title }}</td>
                        <td>{{ note.author.username }}</td>
                        <td>{{ note.created_at.strftime('%d.%m.%Y %H:%M') if note.created_at else '–ù–µ–≤—ñ–¥–æ–º–æ' }}</td>
                        <td>
                            <a href="{{ url_for('web.edit_note', note_id=note.id) }}" class="btn btn-small btn-primary">‚úèÔ∏è</a>
                            <form method="POST" action="{{ url_for('web.delete_note', note_id=note.id) }}" style="display: inline;" onsubmit="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –Ω–æ—Ç–∞—Ç–∫—É?');">
                                <button type="submit" class="btn btn-small btn-danger">üóëÔ∏è</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}


{% extends "base.html" %}
{% block title %}–ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫ ‚Äî FireSlice{% endblock %}

{% block content %}
<section class="max-w-xl mx-auto text-gray-800">

  <h1 class="text-4xl font-extrabold text-orange-600 mb-6 text-center">–ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫</h1>
  <p class="text-center text-gray-600 mb-10">
    –ú–∞—î—à —ñ–¥–µ—ó, –≤—ñ–¥–≥—É–∫–∏ —á–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è?  
    –ú–∏ –∑–∞–≤–∂–¥–∏ —Ä–∞–¥—ñ –ø–æ—á—É—Ç–∏ —Ç–µ–±–µ üî•
  </p>

  <!-- Feedback Form -->
  <form id="feedbackForm" class="bg-white p-8 rounded-xl shadow-md space-y-6">
    <div>
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1">–Ü–º‚Äô—è</label>
      <input type="text" id="name" name="name" required
             class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-orange-400 outline-none">
    </div>

    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input type="email" id="email" name="email" required
             class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-orange-400 outline-none">
    </div>

    <div>
      <label for="message" class="block text-sm font-medium text-gray-700 mb-1">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</label>
      <textarea id="message" name="message" required
                class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-orange-400 outline-none h-32 resize-none"></textarea>
    </div>

    <button type="submit"
            class="w-full bg-orange-500 text-white py-3 rounded-lg font-semibold text-lg hover:bg-orange-600 transition">
      –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ üî•
    </button>
  </form>

  <!-- Thank You Modal -->
  <div id="thankYouModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-lg p-8 text-center max-w-sm mx-auto">
      <h3 class="text-2xl font-bold text-orange-600 mb-4">–î—è–∫—É—î–º–æ –∑–∞ –≤—ñ–¥–≥—É–∫!</h3>
      <p class="text-gray-600 mb-6">–¢–≤–æ—è –¥—É–º–∫–∞ –¥–æ–ø–æ–º–∞–≥–∞—î –Ω–∞–º —Å—Ç–∞–≤–∞—Ç–∏ —â–µ –∫—Ä–∞—â–∏–º–∏ üíõ</p>
      <button id="closeModal"
              class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition">
        –ó–∞–∫—Ä–∏—Ç–∏
      </button>
    </div>
  </div>
</section>

<!-- JS for Modal -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('feedbackForm');
  const modal = document.getElementById('thankYouModal');
  const closeButton = document.getElementById('closeModal');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    fetch('{{ url_for("feedback.feedback") }}', {
      method: 'POST',
      body: new FormData(form),
    })
    .then(res => {
      if (res.ok) {
        modal.classList.remove('hidden');
        form.reset();
      } else {
        alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.');
      }
    })
    .catch(() => alert('–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ. –°–ø—Ä–æ–±—É–π –ø—ñ–∑–Ω—ñ—à–µ.'));
  });

  closeButton.addEventListener('click', () => modal.classList.add('hidden'));
});
</script>
{% endblock %}

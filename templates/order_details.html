{% extends "base.html" %}
{% block title %}Деталі замовлення — FireSlice{% endblock %}

{% block content %}
<section class="max-w-4xl mx-auto text-gray-800">
  <h1 class="text-3xl font-extrabold text-orange-600 mb-8 text-center">
    Деталі замовлення #{{ order['id'] }}
  </h1>

  <div class="bg-white p-6 rounded-xl shadow-lg mb-10">
    <h2 class="text-xl font-bold mb-4 text-gray-900">Інформація про замовлення</h2>
    <p><strong>Email:</strong> {{ order['email'] }}</p>
    <p><strong>Адреса:</strong> {{ order['address'] }}</p>
    <p><strong>Загальна сума:</strong> {{ order['total_price'] }} грн</p>
    <p><strong>Статус:</strong> {{ order['status'] }}</p>
    <p><strong>Дата:</strong> {{ order['date'] }}</p>
  </div>

  <!-- Items -->
  <div class="bg-white p-6 rounded-xl shadow-lg mb-10">
    <h2 class="text-xl font-bold mb-4 text-gray-900">Товари у замовленні</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-orange-100 text-gray-700 text-sm font-semibold">
          <tr>
            <th class="py-3 px-4 text-left">Назва</th>
            <th class="py-3 px-4 text-left">Ціна</th>
            <th class="py-3 px-4 text-left">Кількість</th>
            <th class="py-3 px-4 text-left">Сума</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          {% for item in items %}
          <tr>
            <td class="py-3 px-4">{{ item['name'] }}</td>
            <td class="py-3 px-4">{{ item['price'] }} грн</td>
            <td class="py-3 px-4">{{ item['quantity'] }}</td>
            <td class="py-3 px-4 font-semibold">{{ item['price'] * item['quantity'] }} грн</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Status Update -->
  <div class="bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-xl font-bold mb-4 text-gray-900">Змінити статус</h2>
    <form action="{{ url_for('admin.update_order', order_id=order['id']) }}" method="post" class="flex flex-col md:flex-row gap-4 items-center">
      <select name="status" class="p-3 border rounded-lg focus:ring-2 focus:ring-orange-400 outline-none">
        <option value="Нове" {% if order['status'] == 'Нове' %}selected{% endif %}>Нове</option>
        <option value="В обробці" {% if order['status'] == 'В обробці' %}selected{% endif %}>В обробці</option>
        <option value="Відправлено" {% if order['status'] == 'Відправлено' %}selected{% endif %}>Відправлено</option>
        <option value="Доставлено" {% if order['status'] == 'Доставлено' %}selected{% endif %}>Доставлено</option>
        <option value="Скасовано" {% if order['status'] == 'Скасовано' %}selected{% endif %}>Скасовано</option>
      </select>
      <button type="submit"
              class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition">
        Оновити статус
      </button>
    </form>

    <div class="mt-6">
      <a href="{{ url_for('admin.admin') }}" class="text-orange-600 font-semibold hover:underline">
        ← Назад до списку замовлень
      </a>
    </div>
  </div>
</section>
{% endblock %}
